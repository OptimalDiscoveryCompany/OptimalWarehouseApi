"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[818],{3818:(nt,A,d)=>{d.r(A),d.d(A,{TypeAddressModule:()=>it});var f=d(6895),Q=d(8580),v=d(5588),h=d(4006),O=d(7579),Z=d(1588),l=d(4350),t=d(4650),B=d(7185),w=d(4766),L=d(529);let C=(()=>{class n{constructor(e){this.http=e,this.baseUrl=w.N.rpwebAPI}savePositionType(e){return this.http.post(`${this.baseUrl}/PositionTypeMaster`,e)}updatePositionType(e,i){return this.http.put(`${this.baseUrl}/PositionTypeMaster/${e}`,i)}loadPositionType(){return this.http.get(`${this.baseUrl}/PositionTypeMaster`)}loadPositionTypeById(e){return this.http.get(`${this.baseUrl}/PositionTypeMaster/${e}`)}deletePositionType(e){return this.http.delete(`${this.baseUrl}/PositionTypeMaster/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(L.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=d(6064),x=d(9549),b=d(4859),_=d(4144),F=d(4385),E=d(3238);let H=(()=>{class n{constructor(){this.isReady=!1,this.gameInstanceEvent=new t.vpe}ngOnDestroy(){}ngOnInit(){const e=window.UnityLoader;this.unityInstance=e.instantiate("unityContainer","assets/positionType/Build/positionType.json",{onProgress:(i,o)=>{this.isReady=!0,this.localGameInstance=i,this.gameInstanceEvent.emit({gameInstance:this.localGameInstance}),this.localGameInstance.SendMessage("EventManager","HandleKeyboard","false")}})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unity-view"]],outputs:{gameInstanceEvent:"gameInstanceEvent"},decls:1,vars:0,consts:[["id","unityContainer",1,"unity-container"]],template:function(e,i){1&e&&t._UZ(0,"div",0)}}),n})();function D(n,r){if(1&n&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",19),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij("Total Height (",e.unitSystem,")")}}function G(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",25),t.NdJ("change",function(o){const p=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.setLayerHeight(p.uuid,o))}),t.qZA()()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(3),t.AsE("",e.layerDescription," Height (",i.unitSystem,")"),t.xp6(1),t.s9C("value",i.convertUnit(e.totalHeight))}}function N(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"h3"),t._uU(2,"Levels"),t.qZA(),t.TgZ(3,"mat-form-field")(4,"mat-label"),t._uU(5),t.qZA(),t.TgZ(6,"input",20),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onOffsetValueChange(o))}),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Layer Separation"),t.qZA(),t.TgZ(10,"input",20),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onLayerSeparationChange(o))}),t.qZA()(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Level"),t.qZA(),t.TgZ(14,"mat-select",21),t.NdJ("valueChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onLevelValueChange(o))})("valueChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.actualLayerCount=o)}),t.TgZ(15,"mat-option",22),t._uU(16,"1"),t.qZA(),t.TgZ(17,"mat-option",22),t._uU(18,"2"),t.qZA(),t.TgZ(19,"mat-option",22),t._uU(20,"3"),t.qZA(),t.TgZ(21,"mat-option",22),t._uU(22,"4"),t.qZA(),t.TgZ(23,"mat-option",22),t._uU(24,"5"),t.qZA(),t.TgZ(25,"mat-option",22),t._uU(26,"6"),t.qZA(),t.TgZ(27,"mat-option",22),t._uU(28,"7"),t.qZA(),t.TgZ(29,"mat-option",22),t._uU(30,"8"),t.qZA(),t.TgZ(31,"mat-option",22),t._uU(32,"9"),t.qZA(),t.TgZ(33,"mat-option",22),t._uU(34,"10"),t.qZA(),t.TgZ(35,"mat-option",22),t._uU(36,"11"),t.qZA(),t.TgZ(37,"mat-option",22),t._uU(38,"12"),t.qZA(),t.TgZ(39,"mat-option",22),t._uU(40,"13"),t.qZA(),t.TgZ(41,"mat-option",22),t._uU(42,"14"),t.qZA(),t.TgZ(43,"mat-option",22),t._uU(44,"15"),t.qZA(),t.TgZ(45,"mat-option",22),t._uU(46,"16"),t.qZA(),t.TgZ(47,"mat-option",22),t._uU(48,"17"),t.qZA(),t.TgZ(49,"mat-option",22),t._uU(50,"18"),t.qZA(),t.TgZ(51,"mat-option",22),t._uU(52,"19"),t.qZA(),t.TgZ(53,"mat-option",22),t._uU(54,"20"),t.qZA()()(),t.TgZ(55,"div",23),t.YNc(56,G,5,3,"div",24),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.hij("Ground Offset (",e.unitSystem,")"),t.xp6(1),t.Q6J("value",e.convertUnit(e.layerGroundOffset)),t.xp6(4),t.Q6J("value",e.convertUnit(e.layerSeparation)),t.xp6(4),t.Q6J("value",e.actualLayerCount),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(2),t.Q6J("value",5),t.xp6(2),t.Q6J("value",6),t.xp6(2),t.Q6J("value",7),t.xp6(2),t.Q6J("value",8),t.xp6(2),t.Q6J("value",9),t.xp6(2),t.Q6J("value",10),t.xp6(2),t.Q6J("value",11),t.xp6(2),t.Q6J("value",12),t.xp6(2),t.Q6J("value",13),t.xp6(2),t.Q6J("value",14),t.xp6(2),t.Q6J("value",15),t.xp6(2),t.Q6J("value",16),t.xp6(2),t.Q6J("value",17),t.xp6(2),t.Q6J("value",18),t.xp6(2),t.Q6J("value",19),t.xp6(2),t.Q6J("value",20),t.xp6(3),t.Q6J("ngForOf",e.layers)}}function V(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",30)(1,"mat-form-field",31)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",25),t.NdJ("change",function(o){const p=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.setBinFront(p.uuid,o))}),t.qZA()()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(3),t.AsE("",e.binDescription," Front (",i.unitSystem,")"),t.xp6(1),t.s9C("value",i.convertUnit(e.totalFront))}}function R(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"h4"),t._uU(2,"Rows"),t.qZA(),t.TgZ(3,"div")(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Rows"),t.qZA(),t.TgZ(7,"mat-select",21),t.NdJ("valueChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onBinValueChange(o))})("valueChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.actualBinCount=o)}),t.TgZ(8,"mat-option",22),t._uU(9,"1"),t.qZA(),t.TgZ(10,"mat-option",22),t._uU(11,"2"),t.qZA(),t.TgZ(12,"mat-option",22),t._uU(13,"3"),t.qZA(),t.TgZ(14,"mat-option",22),t._uU(15,"4"),t.qZA(),t.TgZ(16,"mat-option",22),t._uU(17,"5"),t.qZA(),t.TgZ(18,"mat-option",22),t._uU(19,"6"),t.qZA(),t.TgZ(20,"mat-option",22),t._uU(21,"7"),t.qZA(),t.TgZ(22,"mat-option",22),t._uU(23,"8"),t.qZA(),t.TgZ(24,"mat-option",22),t._uU(25,"9"),t.qZA(),t.TgZ(26,"mat-option",22),t._uU(27,"10"),t.qZA(),t.TgZ(28,"mat-option",22),t._uU(29,"11"),t.qZA(),t.TgZ(30,"mat-option",22),t._uU(31,"12"),t.qZA(),t.TgZ(32,"mat-option",22),t._uU(33,"13"),t.qZA(),t.TgZ(34,"mat-option",22),t._uU(35,"14"),t.qZA(),t.TgZ(36,"mat-option",22),t._uU(37,"15"),t.qZA(),t.TgZ(38,"mat-option",22),t._uU(39,"16"),t.qZA(),t.TgZ(40,"mat-option",22),t._uU(41,"17"),t.qZA(),t.TgZ(42,"mat-option",22),t._uU(43,"18"),t.qZA(),t.TgZ(44,"mat-option",22),t._uU(45,"19"),t.qZA(),t.TgZ(46,"mat-option",22),t._uU(47,"20"),t.qZA()()(),t.TgZ(48,"mat-form-field",27)(49,"mat-label"),t._uU(50),t.qZA(),t.TgZ(51,"input",20),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onBinSparationValue(o))}),t.qZA()()(),t.TgZ(52,"div",28),t.YNc(53,V,5,3,"div",29),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("value",e.actualBinCount),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(2),t.Q6J("value",5),t.xp6(2),t.Q6J("value",6),t.xp6(2),t.Q6J("value",7),t.xp6(2),t.Q6J("value",8),t.xp6(2),t.Q6J("value",9),t.xp6(2),t.Q6J("value",10),t.xp6(2),t.Q6J("value",11),t.xp6(2),t.Q6J("value",12),t.xp6(2),t.Q6J("value",13),t.xp6(2),t.Q6J("value",14),t.xp6(2),t.Q6J("value",15),t.xp6(2),t.Q6J("value",16),t.xp6(2),t.Q6J("value",17),t.xp6(2),t.Q6J("value",18),t.xp6(2),t.Q6J("value",19),t.xp6(2),t.Q6J("value",20),t.xp6(4),t.hij("Bin Separtion (",e.unitSystem,")"),t.xp6(1),t.Q6J("value",e.convertUnit(e.binSeparationOffset)),t.xp6(2),t.Q6J("ngForOf",e.bins)}}let U=(()=>{class n{constructor(e,i,o,a,p){this.route=e,this.activeRoute=i,this.toastr=o,this.typeAddressService=a,this.unitService=p,this.layers=[],this.bins=[],this.layerGroundOffset=0,this.binSeparationOffset=0,this.layerSeparation=0,this.actualLayerCount=0,this.actualBinCount=0,this.selectedType="floor",this.unitSystem="m",this.gameInstanceSubject=new O.x,this.gameInstance$=this.gameInstanceSubject.asObservable(),this.subscription=this.gameInstance$.subscribe(()=>{this.gameInstance.SendMessage("EventManager","SelectPositionTypePrefab",this.selectedType),-1!==this.id&&this.typeAddressService.loadPositionTypeById(this.id).subscribe(s=>{if(this.typeForm.patchValue(s),"in"===this.unitSystem){const c=(0,l.c)(s.totalFront),m=(0,l.c)(s.totalDepth),u=(0,l.c)(s.totalHeight);this.typeForm.patchValue({totalFront:c,totalDepth:m,totalHeight:u})}this.typeForm.get("positionColor").setValue("#"+s.positionColor.toString(16)),s.layers.forEach(c=>{c.uuid=(0,Z.Z)(),c.bins.forEach(m=>{m.uuid=(0,Z.Z)()})}),this.positionType=s,this.layers=s.layers,this.bins=s.layers[0].bins,this.actualLayerCount=this.layers.length,this.actualBinCount=this.bins.length,"floor"!==this.positionType.type&&(this.layerGroundOffset=this.layers[0].locationY,this.loadLayers()),"bin"===this.positionType.type&&(this.binSeparationOffset=this.bins[0].locationZ,this.loadBins())})}),this.id=-1}ngOnDestroy(){this.subscription.unsubscribe(),this.unitSystemSub?.unsubscribe()}ngOnInit(){this.initForm();const e=this.activeRoute.snapshot.paramMap.get("id");e&&(this.id=parseInt(e)),this.unitSystem=this.unitService.value?"in":"m",this.unitSystemSub=this.unitService.unit$.subscribe(i=>{if("in"===this.unitSystem&&i)return;if("m"===this.unitSystem&&!i)return;const o=this.typeForm.value,a=[...this.layers],p=[...this.bins];if(i){this.unitSystem="in";const s=(0,l.c)(o.totalFront),c=(0,l.c)(o.totalDepth),m=(0,l.c)(o.totalHeight);this.typeForm.patchValue({totalFront:s,totalDepth:c,totalHeight:m})}else{this.unitSystem="m";const s=(0,l.C)(o.totalFront),c=(0,l.C)(o.totalDepth),m=(0,l.C)(o.totalHeight);this.typeForm.patchValue({totalFront:s,totalDepth:c,totalHeight:m})}this.gameInstance.SendMessage("EventManager","RemoveLayers"),this.gameInstance.SendMessage("EventManager","RemoveBins"),this.layers=a,this.bins=p,this.actualLayerCount=this.layers.length,this.actualBinCount=this.bins.length,"floor"!==o.type&&(this.layerGroundOffset=this.layers[0].locationY,this.loadLayers()),"bin"===o.type&&(this.binSeparationOffset=this.bins[0].locationZ,this.loadBins())})}setLayerAndBinToFloor(e){this.bins.push({binDescription:"B01",totalFront:1,totalHeight:1.3,totalDepth:1.2,angle:0,locationX:0,locationY:0,locationZ:0,images:[],products:[]}),this.layers.push({layerDescription:"L01",totalFront:e.totalFront,totalHeight:e.totalHeight,totalDepth:e.totalDepth,locationX:0,locationY:0,locationZ:0,bins:[],availableSpace:e.totalHeight})}setBinsToRack(){this.bins.push({binDescription:"B01",totalFront:1,totalHeight:1.3,totalDepth:1.2,angle:0,locationX:0,locationY:0,locationZ:0,images:[],products:[]})}submit(){this.positionType=this.typeForm.value,this.positionType.positionColor=parseInt(this.typeForm.get("positionColor").value.toString().replace("#",""),16),"floor"===this.positionType.type?this.setLayerAndBinToFloor(this.positionType):"rack"===this.positionType.type?this.setBinsToRack():this.bins[0].locationZ=this.binSeparationOffset,this.layers.forEach(e=>{e.bins=this.bins}),this.positionType.layers=this.layers,-1===this.id?this.typeAddressService.savePositionType(this.positionType).subscribe({complete:()=>{this.route.navigate(["typeaddress"])},error:e=>console.error(e)}):this.typeAddressService.updatePositionType(this.id,this.positionType).subscribe({complete:()=>{this.route.navigate(["typeaddress"])},error:e=>console.error(e)})}initForm(){let e=1;this.unitService.value&&(e=(0,l.c)(e)),this.typeForm=new h.cw({type:new h.NI(this.selectedType,[h.kI.required]),positionTypeDescription:new h.NI("",[h.kI.required]),totalFront:new h.NI(`${e}`,[h.kI.required]),totalDepth:new h.NI(`${e}`,[h.kI.required]),totalHeight:new h.NI(`${e}`,[h.kI.required]),positionColor:new h.NI("#000000",[h.kI.required])}),this.typeForm.get("type")?.valueChanges.subscribe(i=>{this.selectedType=i;let o=1;"in"===this.unitSystem&&(o=(0,l.c)(o)),this.typeForm.patchValue({totalFront:`${o}`,totalDepth:`${o}`,totalHeight:`${o}`,positionTypeDescription:"",positionColor:"#000000"}),this.layers=[],this.bins=[],this.layerGroundOffset=0,this.gameInstance.SendMessage("EventManager","SelectPositionTypePrefab",this.selectedType),this.resetLayers()}),this.typeForm.get("totalHeight")?.valueChanges.subscribe(i=>{let o={axis:1,amount:+i};"in"===this.unitSystem&&(o.amount=(0,l.C)(+i)),this.resetLayers(),this.gameInstance.SendMessage("EventManager","HandleResizeVisualization",JSON.stringify(o)),this.onLevelValueChange(this.actualLayerCount)}),this.typeForm.get("totalDepth")?.valueChanges.subscribe(i=>{const o={axis:2,amount:i};this.resetLayers(),"in"===this.unitSystem&&(o.amount=(0,l.C)(+i)),this.gameInstance.SendMessage("EventManager","HandleResizeVisualization",JSON.stringify(o)),this.onLevelValueChange(this.actualLayerCount)}),this.typeForm.get("totalFront")?.valueChanges.subscribe(i=>{const o={axis:0,amount:i};this.resetLayers(),"in"===this.unitSystem&&(o.amount=(0,l.C)(+i)),this.gameInstance.SendMessage("EventManager","HandleResizeVisualization",JSON.stringify(o)),this.onLevelValueChange(this.actualLayerCount)})}onLayerSeparationChange(e){let i=+e.target.value;"in"===this.unitSystem&&(i=(0,l.C)(i)),this.gameInstance.SendMessage("EventManager","RemoveLayers"),this.gameInstance.SendMessage("EventManager","RemoveBins"),this.actualLayerCount=1,this.actualBinCount=0,this.onLevelValueChange(1),this.layerSeparation=i}onLevelValueChange(e){this.gameInstance.SendMessage("EventManager","RemoveLayers"),this.gameInstance.SendMessage("EventManager","RemoveBins"),this.resetBins(),this.layers=[];let i=+this.typeForm.get("totalFront")?.value,o=+this.typeForm.get("totalDepth")?.value,a=+this.typeForm.get("totalHeight")?.value;"in"===this.unitSystem&&(i=(0,l.C)(i),o=(0,l.C)(o),a=(0,l.C)(a));const p=+((a-this.layerGroundOffset)/e).toFixed(2);let s=this.layerGroundOffset;for(let m=0;m<e;m++)this.layers.push({bins:[],layerDescription:`L${m}`,locationX:0,locationY:s,locationZ:0,totalDepth:o,totalFront:i,totalHeight:p,uuid:(0,Z.Z)(),availableSpace:p-this.layerSeparation}),this.gameInstance.SendMessage("EventManager","AddLayer",s.toString()),s+=p;const c=this.typeForm.get("type")?.value;c&&"bin"===c&&this.loadBins()}setLayerHeight(e,i){this.resetBins();let o=+i.target.value;"in"===this.unitSystem&&(o=(0,l.C)(o));const a=this.layers.findIndex(u=>u.uuid===e),p=this.layers[a];p.totalHeight=o;let s=this.layerGroundOffset;for(let u=0;u<a;u++){const g=this.layers[u];s+=g.locationY+g.totalHeight}p.locationY=s,s+=p.totalHeight;let c=+this.typeForm.get("totalHeight")?.value;"in"===this.unitSystem&&(c=(0,l.C)(c));const m=+((c-s)/(this.layers.length-1-a)).toFixed(2);for(let u=a+1;u<this.layers.length;u++){const g=this.layers[u];g.locationY=s,g.totalHeight=m,s+=m}this.gameInstance.SendMessage("EventManager","RemoveLayers"),this.layers.forEach(u=>{this.gameInstance.SendMessage("EventManager","AddLayer",u.locationY.toString())})}onBinValueChange(e){this.bins=[],this.gameInstance.SendMessage("EventManager","RemoveBins");let i=+this.typeForm.get("totalFront")?.value,o=+this.typeForm.get("totalDepth")?.value;"in"===this.unitSystem&&(i=(0,l.C)(i),o=(0,l.C)(o));const a=+(i/e).toFixed(2);let p=0;for(let s=0;s<e;s++)this.bins.push({totalHeight:.05,totalFront:a-this.binSeparationOffset,totalDepth:o,binDescription:`B${s}`,angle:0,images:[],products:[],locationX:p,locationY:0,locationZ:0,uuid:(0,Z.Z)()}),this.gameInstance.SendMessage("EventManager","HandleAddBin",JSON.stringify({locationX:p,totalFront:a-this.binSeparationOffset})),p+=a}setBinFront(e,i){let o=+i.target.value;"in"===this.unitSystem&&(o=(0,l.C)(o));const a=o+this.binSeparationOffset,p=this.bins.findIndex(u=>u.uuid===e),s=this.bins[p];if(a<=this.binSeparationOffset)return this.toastr.warning("Size need to be bigger then separion offset size!"),void(i.target.value=s.totalFront+this.binSeparationOffset);s.totalFront=a-this.binSeparationOffset;let c=0,m=+this.typeForm.get("totalFront")?.value;if("in"===this.unitSystem&&(m=(0,l.C)(m)),p+1!==this.bins.length){for(let g=0;g<p;g++){const T=this.bins[g];c+=T.locationX+T.totalFront+this.binSeparationOffset}s.locationX=c,c+=s.totalFront+this.binSeparationOffset;const u=parseFloat(((m-c)/(this.bins.length-1-p)).toFixed(2));for(let g=p+1;g<this.bins.length;g++){const T=this.bins[g];T.locationX=c,T.totalFront=u-this.binSeparationOffset,c+=u}}else{const g=m-(s.locationX+s.totalFront+this.binSeparationOffset);this.bins[p-1].totalFront+=g,s.locationX+=g}this.gameInstance.SendMessage("EventManager","RemoveBins"),this.bins.forEach(u=>{this.gameInstance.SendMessage("EventManager","HandleAddBin",JSON.stringify({locationX:u.locationX,totalFront:u.totalFront}))})}onOffsetValueChange(e){let i=+e.target.value;"in"===this.unitSystem&&(i=(0,l.C)(i)),this.layerGroundOffset=i,this.resetLayers(),this.onLevelValueChange(this.actualLayerCount)}onBinSparationValue(e){let i=+e.target.value;"in"===this.unitSystem&&(i=(0,l.C)(i)),this.binSeparationOffset=i,this.gameInstance.SendMessage("EventManager","RemoveBins"),this.actualBinCount=0,this.bins=[]}setGameInstance(e){this.gameInstance=e.gameInstance,this.gameInstanceSubject.next(this.gameInstance)}convertUnit(e){let i=e;return"in"===this.unitSystem&&(i=(0,l.c)(i)),i.toFixed(2)}loadLayers(){this.layers.forEach(e=>{this.gameInstance.SendMessage("EventManager","AddLayer",e.locationY.toString())})}loadBins(){this.bins.forEach(e=>{this.gameInstance.SendMessage("EventManager","HandleAddBin",JSON.stringify({locationX:e.locationX,totalFront:e.totalFront}))})}resetLayers(){this.gameInstance.SendMessage("EventManager","RemoveLayers"),this.gameInstance.SendMessage("EventManager","RemoveBins"),this.actualLayerCount=1,this.actualBinCount=0,this.onLevelValueChange(1);const e=this.typeForm.get("type")?.value;e&&"bin"===e&&(this.actualBinCount=1,this.onBinValueChange(1))}resetBins(){const e=this.typeForm.get("type")?.value;this.gameInstance.SendMessage("EventManager","RemoveBins"),e&&"bin"===e&&(this.actualBinCount=1,this.onBinValueChange(1))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.F0),t.Y36(v.gz),t.Y36(B._W),t.Y36(C),t.Y36(S._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-type-address-create"]],decls:44,vars:7,consts:[[1,"grid-layout-divs"],[2,"margin-top","5%"],[3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","type"],["value","floor"],["value","rack"],["value","bin"],["matInput","","formControlName","positionTypeDescription"],["matInput","","formControlName","totalFront"],["matInput","","formControlName","totalDepth"],[4,"ngIf"],[2,"display","grid","grid-template-rows","50% 50%"],["type","color","formControlName","positionColor",2,"width","50%"],["mat-raised-button","","color","primary","type","submit"],[1,"levels",3,"ngClass"],[1,"view-bins"],[3,"gameInstanceEvent"],["class","bins",4,"ngIf"],["matInput","","formControlName","totalHeight"],["matInput","",3,"value","change"],[3,"value","valueChange"],[3,"value"],[2,"height","400px","overflow","auto"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"value","change"],[1,"bins"],[2,"margin-left","10px"],[2,"width","800px","overflow-x","auto","display","flex"],["style","margin-left: 0%",4,"ngFor","ngForOf"],[2,"margin-left","0%"],[2,"width","80%"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div")(2,"h3"),t._uU(3,"Type Address"),t.qZA(),t.TgZ(4,"div",1)(5,"form",2),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"mat-form-field",3)(7,"mat-label"),t._uU(8,"Type"),t.qZA(),t.TgZ(9,"mat-select",4)(10,"mat-option",5),t._uU(11,"Floor"),t.qZA(),t.TgZ(12,"mat-option",6),t._uU(13,"Rack"),t.qZA(),t.TgZ(14,"mat-option",7),t._uU(15,"Bin"),t.qZA()()(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Description"),t.qZA(),t._UZ(19,"input",8),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22),t.qZA(),t._UZ(23,"input",9),t.qZA(),t.TgZ(24,"mat-form-field")(25,"mat-label"),t._uU(26),t.qZA(),t._UZ(27,"input",10),t.qZA(),t.YNc(28,D,4,1,"mat-form-field",11),t.TgZ(29,"div",12)(30,"mat-label"),t._uU(31,"Color"),t.qZA(),t._UZ(32,"input",13),t.qZA(),t.TgZ(33,"div",1)(34,"button",14),t._uU(35,"Save"),t.qZA()()()()(),t.TgZ(36,"div",15),t.YNc(37,N,57,25,"div",11),t.qZA(),t.TgZ(38,"div",16)(39,"div")(40,"h3"),t._uU(41,"View"),t.qZA(),t.TgZ(42,"app-unity-view",17),t.NdJ("gameInstanceEvent",function(a){return i.setGameInstance(a)}),t.qZA()(),t.YNc(43,R,54,24,"div",18),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.typeForm),t.xp6(17),t.hij("Total Front (",i.unitSystem,")"),t.xp6(4),t.hij("Total Depth (",i.unitSystem,")"),t.xp6(2),t.Q6J("ngIf","floor"!==i.selectedType),t.xp6(8),t.Q6J("ngClass","floor"!==i.selectedType?"border-lightgray":""),t.xp6(1),t.Q6J("ngIf","floor"!==i.selectedType),t.xp6(6),t.Q6J("ngIf","bin"===i.selectedType))},dependencies:[f.mk,f.sg,f.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,x.KE,x.hX,b.lW,_.Nt,F.gD,E.ey,H],styles:[".grid-layout-divs[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% 15% 50%;grid-template-rows:90vh;column-gap:10px;margin:.5%;padding:0% 2%}.levels[_ngcontent-%COMP%]{margin-top:5%;padding:4%;border-radius:10px}.view-bins[_ngcontent-%COMP%]{margin-top:2.8%;display:grid;grid-template-rows:75% 25%}.bins[_ngcontent-%COMP%]{border:.1px solid lightgray;border-radius:10px;padding-left:5%;padding-top:1%}.border-lightgray[_ngcontent-%COMP%]{border:1px solid lightgray}"]}),n})();var J=d(5861),I=d(3905),M=d(5972),y=d(4943),q=d(7217);const Y=["dataGrid"];function P(n,r){if(1&n&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.AsE("",i.convertUnits(e.value).toFixed(2)," ",i.unitSystem,"")}}function $(n,r){if(1&n&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.AsE("",i.convertUnits(e.value).toFixed(2)," ",i.unitSystem,"")}}function X(n,r){if(1&n&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.AsE("",i.convertUnits(e.value).toFixed(2)," ",i.unitSystem,"")}}const z=function(n){return{"background-color":n}};function j(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",20),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(1,z,i.convertColor(e.value)))}}let K=(()=>{class n{constructor(e,i,o){this.typeAddressService=e,this.route=i,this.unitService=o,this.positionType=[],this.unitSystem="m"}ngOnInit(){this.onDelete=this.onDelete.bind(this),this.onUpdate=this.onUpdate.bind(this),this.unitSubsctiption=this.unitService.unit$.subscribe(e=>{this.unitSystem=e?"in":"m",this.dataGrid&&this.dataGrid.instance.refresh()})}ngOnDestroy(){this.unitSubsctiption?.unsubscribe()}onUpdate(e){this.route.navigate(["typeaddress/update",e.row.data.id])}convertUnits(e){return"in"===this.unitSystem?(0,l.c)(+e):+e}convertColor(e){return`#${(+e).toString(16)}`}onDelete(e){var i=this;return(0,J.Z)(function*(){e.component.deleteRow(e.row.rowIndex);const p=e.row.data.id;try{yield(0,I.z)(i.typeAddressService.deletePositionType(p))}catch(s){console.error("Error ",s)}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C),t.Y36(v.F0),t.Y36(S._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-type-address-grid"]],viewQuery:function(e,i){if(1&e&&t.Gf(Y,5),2&e){let o;t.iGM(o=t.CRH())&&(i.dataGrid=o.first)}},inputs:{positionType:"positionType"},decls:24,vars:15,consts:[[2,"margin-top","3%","border","1px solid lightgray","padding","2%","border-radius","2%"],["id","gridContainerPostionType","height","clamp(400px, 700px, 900px)",1,"dx-rounded-borders",3,"dataSource","showBorders","allowColumnReordering","allowColumnResizing"],["dataGrid",""],["mode","virtual"],[3,"visible"],[3,"pageSize"],["mode","none"],["mode","single"],["mode","popup"],["confirmDeleteMessage",""],["dataField","type","caption","Type"],["dataField","positionTypeDescription","caption","Description"],["dataField","totalFront","caption","Front","cellTemplate","front"],["dataField","totalDepth","caption","Depth","cellTemplate","depth"],["dataField","totalHeight","caption","Height","cellTemplate","height"],["dataField","positionColor","caption","Color","cellTemplate","color",3,"width"],["type","buttons","caption","Actions",3,"width"],["icon","edit",3,"onClick"],["icon","trash",3,"onClick"],[4,"dxTemplate","dxTemplateOf"],[2,"border","1px solid black","width","100%","height","20px",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"dx-data-grid",1,2),t._UZ(3,"dxo-scrolling",3)(4,"dxo-search-panel",4)(5,"dxo-paging",5)(6,"dxo-group-panel",4)(7,"dxo-sorting",6)(8,"dxo-selection",7),t.TgZ(9,"dxo-editing",8),t._UZ(10,"dxo-texts",9),t.qZA(),t._UZ(11,"dxi-column",10)(12,"dxi-column",11)(13,"dxi-column",12)(14,"dxi-column",13)(15,"dxi-column",14)(16,"dxi-column",15),t.TgZ(17,"dxi-column",16),t._UZ(18,"dxi-button",17)(19,"dxi-button",18),t.qZA(),t.YNc(20,P,3,2,"div",19),t.YNc(21,$,3,2,"div",19),t.YNc(22,X,3,2,"div",19),t.YNc(23,j,2,3,"div",19),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("dataSource",i.positionType)("showBorders",!0)("allowColumnReordering",!0)("allowColumnResizing",!0),t.xp6(3),t.Q6J("visible",!0),t.xp6(1),t.Q6J("pageSize",10),t.xp6(1),t.Q6J("visible",!0),t.xp6(10),t.Q6J("width",50),t.xp6(1),t.Q6J("width",110),t.xp6(1),t.Q6J("onClick",i.onUpdate),t.xp6(1),t.Q6J("onClick",i.onDelete),t.xp6(1),t.Q6J("dxTemplateOf","front"),t.xp6(1),t.Q6J("dxTemplateOf","depth"),t.xp6(1),t.Q6J("dxTemplateOf","height"),t.xp6(1),t.Q6J("dxTemplateOf","color"))},dependencies:[f.PC,M.e,y.u10,y.qvW,y.k4o,y.Uo8,y.Een,y.sXh,y.PXJ,y.XXE,y.Lz9,y.SWO,q.p6],changeDetection:0}),n})();const W=[{path:"",component:(()=>{class n{constructor(e){this.typeAddressService=e,this.positionType=[]}ngOnInit(){this.loadPositionType()}loadPositionType(){var e=this;return(0,J.Z)(function*(){try{e.positionType=yield(0,I.z)(e.typeAddressService.loadPositionType()),console.info(e.positionType)}catch(i){console.log(i)}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-type-address"]],decls:8,vars:1,consts:[[1,"container"],[2,"margin-top","2%"],["tabindex","0","routerLink","create",1,"large","ui","vertical","animated","button","primary"],[1,"hidden","content"],[1,"visible","content"],[1,"plus","icon"],[3,"positionType"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Add"),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"i",5),t.qZA()()(),t._UZ(7,"app-type-address-grid",6),t.qZA()),2&e&&(t.xp6(7),t.Q6J("positionType",i.positionType))},dependencies:[v.rH,K],styles:[".mat-focused .mat-form-field-label{color:green!important}  .mat-form-field-underline{background-color:green!important}  .mat-form-field-ripple{background-color:green!important}"]}),n})()},{path:"create",component:U},{path:"update/:id",component:U}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(W),v.Bz]}),n})();var tt=d(5349),et=d(7392);let it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[C,{provide:x.o2,useValue:{appearance:"outline"}}],imports:[f.ez,k,tt.m,M.x,Q.XD,q.ie,b.ot,et.Ps,x.lN,_.c,F.LD]}),n})()}}]);
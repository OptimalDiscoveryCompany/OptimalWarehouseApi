<div class="grid-layout-menu">
  <div class="div-menu-style">
    <div style="width: 50vw">
      <mat-form-field>
        <mat-select placeholder="Scenario">
          <mat-option
            *ngFor="let scenario of scenarios"
            [value]="scenario.id"
            (onSelectionChange)="selectScenario($event)"
            >{{ scenario.scenarioName }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      <div>
        <div
          class="ui vertical button"
          tabindex="0"
          (click)="addScenario()"
          style="height: 50%; margin-top: 2%"
        >
          <div
            class="visible content"
            matTooltip="Add Scenario"
            [matTooltipPosition]="'below'"
            [matTooltipHideDelay]="1000"
          >
            <i class="plus green icon"></i>
          </div>
        </div>
        <div
          class="ui vertical button"
          tabindex="0"
          (click)="removeScenario()"
          style="height: 50%; margin-top: 2%"
        >
          <div
            class="visible content"
            matTooltip="Remove Scenario"
            [matTooltipPosition]="'below'"
            [matTooltipHideDelay]="1000"
          >
            <i class="cancel red icon"></i>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <form [formGroup]="form">
      <div>
        <div
          style="
            height: 20%;
            width: 10%;
            display: inline-block;
            margin-right: 10px;
          "
        >
          Scenario Name:
        </div>
        <div style="display: inline-block; width: 20%">
          <mat-form-field>
            <input matInput value="Scenario" formControlName="scenarioName" />
          </mat-form-field>
        </div>
      </div>
      <div>
        <div
          style="
            height: 20%;
            width: 10%;
            display: inline-block;
            margin-right: 10px;
          "
        >
          Timeframe:
        </div>
        <div style="display: inline-block; width: 20%">
          <mat-form-field>
            <mat-select formControlName="timeframe">
              <mat-option
                *ngFor="let timeframe of timeframeList"
                [value]="timeframe"
                >{{ timeframe }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div>
        <div
          style="
            height: 20%;
            width: 10%;
            display: inline-block;
            margin-right: 10px;
          "
        >
          Shifts:
        </div>
        <div style="display: inline-block; width: 20%">
          <mat-form-field>
            <mat-select formControlName="shifts" [multiple]="true">
              <mat-option *ngFor="let shift of shiftsList" [value]="shift">{{
                shift
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div style="
      display: flex;
      align-items: center;
      margin-top: 20px;
      margin-bottom: 10px;
    ">
      <div style="
        margin-right: 91px;
        align-self: flex-start;
      ">
        Picking:
      </div>
      <div style="
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: center;
        display: flex;
        flex-direction: column;
      ">
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Travel Speed (tf/s)</mat-label>
          <input matInput formControlName="travelSpeedPicking" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Seconds per case</mat-label>
          <input matInput formControlName="secondsPerCase" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Fixed seconds per stop</mat-label>
          <input matInput formControlName="fixedSecPerStop" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Labor cost per hour</mat-label>
          <input matInput formControlName="laborCostPerHour" required="false" />
        </mat-form-field>
        
      </div>
    </div>

    <div style="
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    ">
      <div style="
        margin-right: 48px;
        align-self: flex-start;
      ">
        Replenishment:
      </div>
      <div style="
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: center;
        display: flex;
        flex-direction: column;
      ">
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Travel Speed (tf/s)</mat-label>
          <input matInput formControlName="travelSpeedReplenishment" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Seconds per pallet</mat-label>
          <input matInput formControlName="secondsPerPallet" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Seconds per case</mat-label>
          <input matInput formControlName="secPerCaseReple" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Fixed seconds per stop</mat-label>
          <input matInput formControlName="fixedSecPerStopReple" required="false" />
        </mat-form-field>
        <mat-form-field style="
          font-size: 14px;
        ">
          <mat-label>Labor cost per hour</mat-label>
          <input matInput formControlName="laborCostPerHourReple" required="false" />
        </mat-form-field>
        
      </div>
    </div>

      <div style="margin-top: 10px">
        <div style="display: flex; align-items: center;">
          <div style="
            height: 20%;
            width: 10%;
            display: inline-block;
            margin-right: 15px;
          ">
            Out of stock:
          </div>
          <mat-radio-group formControlName="outOfStock" [(ngModel)]="selectedOption"> 
            <mat-radio-button value="replenish" >Replenish by end of pick and return</mat-radio-button>
            <mat-radio-button style="margin-left: 20px;" value="fixed">Fixed cost per incident</mat-radio-button>
          </mat-radio-group>
          <input style="margin-left: 10px; width: 50px;" formControlName="fixedCostValue" type="text" *ngIf="selectedOption === 'fixed'">
        </div>
      </div>

      <div style="margin-top: 30px">
        <div
          style="
            height: 20%;
            width: 10%;
            display: inline-block;
            margin-right: 10px;
          "
        >
          Forecasted Demand:
        </div>
      </div>
      <div style="margin-top: 10px">
        <div
          style="
            height: 20%;
            width: 10%;
            text-align: center;
            display: flex;
            margin-right: 10px;
          "
        >
          <div class="ui vertical button" tabindex="0" (click)="openModal()">
            <div class="visible content">
              <i class="plus green icon"></i>
            </div>
          </div>
        </div>
        <div *ngFor="let criteria of criterias" style="margin-top: 10px">
          <div
            style="
              height: 20%;
              width: 10%;
              text-align: center;
              display: inline-block;
              margin-right: 10px;
            "
          ></div>
          <div style="display: inline-block; width: 20%">
            <input
              style="width: 260px; border-width: 1px 1px"
              [value]="generateString(criteria)"
            />
          </div>
          <div
            style="
              height: 20%;
              width: 5%;
              text-align: center;
              display: inline-block;
              margin-left: 10px;
              margin-right: 10px;
            "
          >
            <div
              class="ui vertical button"
              tabindex="0"
              (click)="openModal(criteria.id)"
            >
              <div class="visible content">. . .</div>
            </div>
          </div>
          <div
            style="
              height: 20%;
              width: 5%;
              text-align: center;
              display: inline-block;
              margin-right: 10px;
            "
          >
            <div
              class="ui vertical button"
              tabindex="0"
              (click)="removeCriteria(criteria.id)"
            >
              <div class="visible content">
                <i class="close red icon"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-background" *ngIf="isModalOpen">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Criteria</h2>
            <div
              style="
                left: 95%;
                position: absolute;
                font-weight: 800;
                cursor: pointer;
              "
              (click)="closeModal()"
            >
              X
            </div>
          </div>
          <form [formGroup]="form">
            <div style="padding: 2%" formGroupName="criteria">
              <div>
                <mat-radio-group
                  aria-label="Select an option"
                  aria-labelledby="example-radio-group-label"
                  class="example-radio-group"
                  formControlName="criteriaType"
                >
                  <mat-radio-button class="example-radio-button" [value]="1"
                    >Package Group</mat-radio-button
                  >
                  <mat-radio-button class="example-radio-button" [value]="2"
                    >Product</mat-radio-button
                  >
                </mat-radio-group>
              </div>

              <ng-container>
                <div
                  style="display: grid; grid-template-columns: 50% 50%"
                  *ngIf="criteriaType === 1; else case2"
                >
                  <div>
                    <label style="font-weight: 800">Package Groups</label>
                    <mat-checkbox
                      (change)="toggleSelectAll()"
                      labelPosition="before"
                      class="mat-checkbox-before"
                      style="margin-left: 223px"
                      >Select All</mat-checkbox
                    >
                    <div class="package-group-list">
                      <mat-selection-list
                        formControlName="packagesGroup"
                        #packagesSelectionList
                        [multiple]="true"
                      >
                        <mat-list-option
                          *ngFor="let packageGroup of packagesList"
                          [value]="packageGroup"
                          [selected]="selectAll"
                        >
                          <mat-checkbox>{{ packageGroup }}</mat-checkbox>
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>

                  <div>
                    <label style="font-weight: 800">Types</label>
                    <div class="package-group-list">
                      <mat-selection-list formControlName="productType">
                        <mat-list-option
                          *ngFor="let productType of productTypeList"
                          [value]="productType"
                        >
                          {{ productType }}
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>
                </div>
                <ng-template #case2>
                  <div>
                    <label style="font-weight: 800">Products</label>
                    <div class="package-group-list">
                      <mat-selection-list
                        formControlName="product"
                        [multiple]="false"
                      >
                        <mat-list-option
                          *ngFor="let product of products"
                          [value]="
                            product.productId +
                            ' - ' +
                            product.productDescription
                          "
                        >
                          {{ product.productId }} -
                          {{ product.productDescription }}
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>
                </ng-template>
              </ng-container>

              <div style="display: flex">
                <mat-radio-group
                  aria-label="Select an option"
                  class="example-radio-group"
                  formControlName="modifierType"
                >
                  <mat-radio-button class="example-radio-button" [value]="1"
                    >Percentage</mat-radio-button
                  >
                  <mat-radio-button
                    *ngIf="criteriaType !== 1"
                    class="example-radio-button"
                    [value]="2"
                    >Cases</mat-radio-button
                  >
                </mat-radio-group>
                <mat-form-field
                  style="width: 4%; margin-left: 1%"
                  [style.margin-top]="criteriaType === 1 ? '0.2%' : '2.3%'"
                >
                  <input matInput type="number" formControlName="quantity" />
                  <span matSuffix *ngIf="modifierType === 1">%</span>
                </mat-form-field>
              </div>
              <div>
                <div
                  style="
                    height: 20%;
                    width: 10%;
                    text-align: center;
                    display: flex;
                    margin-right: 10px;
                  "
                >
                  <div
                    class="ui vertical button"
                    tabindex="0"
                    (click)="handleEditCreateCriteria()"
                  >
                    <div class="visible content">
                      <i [ngClass]="getButtonClass()" class="icon"></i>
                    </div>
                  </div>
                  <div
                    class="ui vertical button"
                    tabindex="0"
                    (click)="closeModal()"
                  >
                    <div class="visible content">
                      <i class="cancel red icon"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <hr />

      <div
        class="ui vertical button"
        tabindex="0"
        style="background-color: #2185d0; color: #ffffff"
      >
        <div class="visible content">Optimize</div>
      </div>
    </form>
  </div>
</div>

<div class="grid-layout-divs">
  <div>
    <h3>Type Address</h3>
    <div style="margin-top: 5%">
      <form [formGroup]="typeForm" (ngSubmit)="submit()">
        <mat-form-field appearance="fill">
          <mat-label>Type</mat-label>
          <mat-select formControlName="type">
            <mat-option value="floor">Floor</mat-option>
            <mat-option value="rack">Rack</mat-option>
            <mat-option value="bin">Bin</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Description</mat-label>
          <input matInput formControlName="positionTypeDescription" />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Total Front ({{ unitSystem }})</mat-label>
          <input matInput formControlName="totalFront" />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Total Depth ({{ unitSystem }})</mat-label>
          <input matInput formControlName="totalDepth" />
        </mat-form-field>
        <mat-form-field *ngIf="selectedType !== 'floor'">
          <mat-label>Total Height ({{ unitSystem }})</mat-label>
          <input matInput formControlName="totalHeight" />
        </mat-form-field>
        <div style="display: grid; grid-template-rows: 50% 50%">
          <mat-label>Color</mat-label>
          <input
            type="color"
            style="width: 50%"
            formControlName="positionColor"
          />
        </div>
        <div style="margin-top: 5%">
          <button mat-raised-button color="primary" type="submit">Save</button>
        </div>
      </form>
    </div>
  </div>
  <div
    class="levels"
    [ngClass]="selectedType !== 'floor' ? 'border-lightgray' : ''"
  >
    <div *ngIf="selectedType !== 'floor'">
      <h3>Levels</h3>
      <mat-form-field>
        <mat-label>Ground Offset ({{ unitSystem }})</mat-label>
        <input
          matInput
          (change)="onOffsetValueChange($event)"
          [value]="convertUnit(layerGroundOffset)"
        />
      </mat-form-field>

      <mat-form-field>
        <mat-label>Layer Separation</mat-label>
        <input
          matInput
          (change)="onLayerSeparationChange($event)"
          [value]="convertUnit(layerSeparation)"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Level</mat-label>
        <mat-select
          (valueChange)="onLevelValueChange($event)"
          [(value)]="actualLayerCount"
        >
          <mat-option [value]="1">1</mat-option>
          <mat-option [value]="2">2</mat-option>
          <mat-option [value]="3">3</mat-option>
          <mat-option [value]="4">4</mat-option>
          <mat-option [value]="5">5</mat-option>
          <mat-option [value]="6">6</mat-option>
          <mat-option [value]="7">7</mat-option>
          <mat-option [value]="8">8</mat-option>
          <mat-option [value]="9">9</mat-option>
          <mat-option [value]="10">10</mat-option>
          <mat-option [value]="11">11</mat-option>
          <mat-option [value]="12">12</mat-option>
          <mat-option [value]="13">13</mat-option>
          <mat-option [value]="14">14</mat-option>
          <mat-option [value]="15">15</mat-option>
          <mat-option [value]="16">16</mat-option>
          <mat-option [value]="17">17</mat-option>
          <mat-option [value]="18">18</mat-option>
          <mat-option [value]="19">19</mat-option>
          <mat-option [value]="20">20</mat-option>
        </mat-select>
      </mat-form-field>
      <div style="height: 400px; overflow: auto">
        <div
          *ngFor="let layer of layers"
          style="display: flex"
          (mouseover)="checkSubdivision(layer.uuid!)"
        >
          <mat-form-field style="width: 60%">
            <mat-label
              >{{ layer.layerDescription }} Height ({{ unitSystem }})</mat-label
            >
            <input
              matInput
              type="number"
              (change)="setLayerHeight(layer.uuid!, $event)"
              value="{{ convertUnit(layer.totalHeight) }}"
            />
            <!-- toggle -->
          </mat-form-field>
          <div style="height: 100%; margin-left: 5%; margin-top: 7%">
            <mat-checkbox (change)="setSubdivision($event, layer.uuid!)"
              >Sub.div.</mat-checkbox
            >
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="view-bins">
    <div>
      <h3>View</h3>
      <app-unity-view
        (gameInstanceEvent)="setGameInstance($event)"
      ></app-unity-view>
    </div>
    <div class="bins" *ngIf="selectedType === 'bin' || isSubdivision">
      <h4>
        {{ !isSubdivision ? "Rows" : "Layer " + getSelectedLayerDescription() }}
      </h4>
      <div>
        <mat-form-field appearance="fill">
          <mat-label>{{
            !isSubdivision ? "Rows" : "Products Spots "
          }}</mat-label>
          <mat-select
            (valueChange)="onBinValueChange($event)"
            [(value)]="actualBinCount"
          >
            <mat-option [value]="1">1</mat-option>
            <mat-option [value]="2">2</mat-option>
            <mat-option [value]="3">3</mat-option>
            <mat-option [value]="4">4</mat-option>
            <mat-option [value]="5">5</mat-option>
            <mat-option [value]="6">6</mat-option>
            <mat-option [value]="7">7</mat-option>
            <mat-option [value]="8">8</mat-option>
            <mat-option [value]="9">9</mat-option>
            <mat-option [value]="10">10</mat-option>
            <mat-option [value]="11">11</mat-option>
            <mat-option [value]="12">12</mat-option>
            <mat-option [value]="13">13</mat-option>
            <mat-option [value]="14">14</mat-option>
            <mat-option [value]="15">15</mat-option>
            <mat-option [value]="16">16</mat-option>
            <mat-option [value]="17">17</mat-option>
            <mat-option [value]="18">18</mat-option>
            <mat-option [value]="19">19</mat-option>
            <mat-option [value]="20">20</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field style="margin-left: 10px" *ngIf="!isSubdivision">
          <mat-label>Bin Separtion ({{ unitSystem }})</mat-label>
          <input
            matInput
            (change)="onBinSparationValue($event)"
            [value]="convertUnit(binSeparationOffset)"
          />
        </mat-form-field>
      </div>
      <div style="width: 800px; overflow-x: auto; display: flex">
        <div *ngFor="let bin of bins" style="margin-left: 0%">
          <mat-form-field style="width: 80%">
            <mat-label
              >{{
                !isSubdivision
                  ? bin.binDescription
                  : bin.binDescription.replace("B", "P")
              }}
              Front ({{ unitSystem }})</mat-label
            >
            <input
              matInput
              type="number"
              (change)="setBinFront(bin.uuid!, $event)"
              value="{{ convertUnit(bin.totalFront) }}"
            />
          </mat-form-field>
        </div>
      </div>
    </div>
  </div>
</div>

import { Component, EventEmitter, OnInit, Output } from '@angular/core';

@Component({
  selector: 'app-type-address-view-unity',
  templateUrl: './type-address-view-unity.component.html',
  styleUrls: ['./type-address-view-unity.component.scss'],
})
export class TypeAddressViewUnityComponent implements OnInit {
  isReady = false;
  unityInstance: any;
  localGameInstance: any;

  @Output() gameInstanceEvent = new EventEmitter<{ gameInstance: any }>();

  constructor() {}

  ngOnInit(): void {
    const loader = (window as any).UnityLoader;
    this.unityInstance = loader.instantiate(
      'unityContainer',
      `assets/positionType/Build/positionType.json`,
      {
        onProgress: (gameInstance: any, progress: number) => {
          this.isReady = true;
          this.localGameInstance = gameInstance;
          this.gameInstanceEvent.emit({
            gameInstance,
          });
          this.localGameInstance.SendMessage('EventManager', 'HandleKeyboard', "false");
        },
      }
    );
  }


}
